<!DOCTYPE html>
<html>

<head>
  <title>Chess</title>
  <link rel="stylesheet" href="css/chessboard-1.0.0.min.css">
  <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
  <script src="js/chessboard-1.0.0.min.js"></script>
  <style>
    html,
    body {
      height: 100%;
      background-color: #1d1d1d;
    }

    body {
      margin: 0px;
    }

    h1 {
      color: white;
      font-family: 'Poiret One';
      font-size: 50px;
      background-color: #1d1d1d;
      border-top: 10px solid #1d1d1d;
    }

    /* Set height of the grid so .sidenav can be 100% (adjust as needed) */
    .row.content {
      background-color: #1d1d1d;
      color: white;
      display: flex;
      justify-content: center;
    }

    .full-height {
      height: 100%;
      background: #1d1d1d;
    }

    .text-center {
      color: white;
      justify-content: center;
      text-align: center;
      background-color: #1d1d1d;

    }

    /* Set gray background color and 100% height */
    .sidenav {
      padding-top: 20px;
      margin-left: 30px;
      height: 100%;
      background-color: #1d1d1d;
      color: white;
    }

    .board {
      background-color: lightslategray;
    }

    .elo {
      color: white;
      display: block;
      width: 400px;
    }

    .eloSlider {
      display: block;
      width: 400px;
    }

    .flex-container {
      display: flex;
      flex-direction: column;
      background-color: #1d1d1d;
    }

    .button {
      appearance: none;
      background-color: transparent;
      border: 2px solid white;
      border-radius: 15px;
      box-sizing: border-box;
      color: #bbbbbb;
      cursor: pointer;
      display: inline-block;
      font-family: Roobert, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      font-size: 16px;
      font-weight: 600;
      line-height: normal;
      margin: 0;
      min-height: 60px;
      min-width: 0;
      outline: none;
      padding: 16px 24px;
      text-align: center;
      text-decoration: none;
      transition: all 300ms cubic-bezier(.23, 1, 0.32, 1);
      user-select: none;
      -webkit-user-select: none;
      touch-action: manipulation;
      width: 100%;
      will-change: transform;
    }

    .button:disabled {
      pointer-events: none;
    }

    .button:hover {
      color: #fff;
      background-color: #1A1A1A;
      box-shadow: rgba(0, 0, 0, 0.25) 0 8px 15px;
      transform: translateY(-2px);
    }

    .button:active {
      box-shadow: none;
      transform: translateY(0);
    }

    .engines {
      margin: 25px;
    }
    .eloSlider{
      margin-bottom: 15px;
    }
  </style>
</head>
<script>
  let position = "r1bqkbnr/pppp1ppp/2n5/1B2p3/4P3/5N2/PPPP1PPP/RNBQK2R";
  let whiteStrength = 1000;
  let blackStrength = 1000;
  var configEditable = {
    draggable: true,
    dropOffBoard: 'trash',
    sparePieces: true
  }
  var configGame = {
    draggable: true,
    position: position
  }

</script>

<body>
  <div class="text-center full-height">
    <h1>Autochess ÄŒenkovice 2022</h1>
    <div class="row content">
      <div class="col-sm-8 text-left" style="width: 588px">

        <div id="board" class="board">
          <div id="board1"></div>
          
        </div>
      </div>

      <div class="col-sm-2 sidenav">
        <div class="engines">
          <h3>Engine settings</h3>
          <label type="text" class="elo" id="whiteEngineLabel">White ELO: 1000</label>
          <input type="range" class="eloSlider" id="whiteEngine" name="whiteEngine" min="700" max="2500" step="50"
            value="1000" onchange="updateTextInput('white',this.value);">
          <label type="text" class="elo" id="blackEngineLabel">Black ELO: 1000</label>
          <input type="range" class="eloSlider" id="blackEngine" name="whiteEngine" min="700" max="2500" step="50"
            value="1000" onchange="updateTextInput('black',this.value);">
        </div>
        <div class="flex-container">
          <button class="button" id="setStartBtn">Start Board</button>
          <button class="button" id="clearBtn">Clear Board</button>
          <button class="button" id="logBtn">Log Board</button>
          <button class="button" id="loadFENBtn">Load Position</button>
          <button class="button" id="saveFENBtn">Save Position</button>
          <button class="button" id="statrBTN">Start Game</button>
          <button class="button" id="editBTN">Edit Position</button>
        </div>

        <script>
          var board1 = ChessBoard('board1', configEditable);
          $('#clearBtn').on('click', board1.clear);
          $('#logBtn').on('click', clickShowPositionBtn);
          $('#setStartBtn').on('click', board1.start)
          $('#loadFENBtn').on('click', function () {
            board1.position(position)
          })
          $('#saveFENBtn').on('click', function () {
            position = board1.fen()
          })

          function clickShowPositionBtn() {
            console.log('Current position as a FEN string:')
            console.log(board1.fen())
          }
          function updateTextInput(textID, val) {
            if (textID == "white") {
              whiteStrength = val;
              document.getElementById("whiteEngineLabel").innerHTML = "White ELO: " + val;
            }
            else {
              blackStrength = val;
              document.getElementById("blackEngineLabel").innerHTML = "Black ELO: " + val;
            }
          }

          function startGame() {
            console.log('Current position as a FEN string:');
            position = board1.fen();
            let data = {
              "position": position,
              "whiteElo": whiteStrength,
              "blackElo": blackStrength,
            }
            console.log(data);

            board1 = ChessBoard("board1", { draggable: true, position: position });

          }
          
          function editGame() {          
            position = board1.fen();
            board1 = ChessBoard("board1", {
              draggable: true,
              dropOffBoard: 'trash',
              position: position,
              sparePieces: true,
            });

          }

          $('#statrBTN').on('click', startGame)
          $('#editBTN').on('click', editGame) 
        </script>

      </div>
    </div>
  </div>
</body>

</html>